<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 404 ‚Äî Candidate Integrity Suite</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --color-bg: #0a0e27;
            --color-bg-secondary: #151a3d;
            --color-primary: #00ff9f;
            --color-secondary: #00d4ff;
            --color-accent: #ff006e;
            --color-warning: #ffbe0b;
            --color-text: #e0e6ff;
            --color-text-dim: #8892b8;
            --color-white: #ffffff;
            --color-success: #00ff9f;
            --color-danger: #ff006e;
            --shadow-neon: 0 0 20px rgba(0, 255, 159, 0.3);
            --shadow-neon-pink: 0 0 20px rgba(255, 0, 110, 0.3);
            --shadow-soft: 0 4px 12px rgba(0, 0, 0, 0.5);
            --shadow-medium: 0 8px 24px rgba(0, 0, 0, 0.7);
            --transition: 0.3s ease;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f4d 100%);
            color: var(--color-text);
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                repeating-linear-gradient(0deg, rgba(0, 255, 159, 0.03) 0px, transparent 1px, transparent 2px, rgba(0, 255, 159, 0.03) 3px),
                repeating-linear-gradient(90deg, rgba(0, 212, 255, 0.03) 0px, transparent 1px, transparent 2px, rgba(0, 212, 255, 0.03) 3px);
            pointer-events: none;
            z-index: -1;
        }

        #particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 1024px;
            margin: 0 auto;
            padding: 2rem 1rem;
            position: relative;
            z-index: 1;
        }

        header {
            background: rgba(10, 14, 39, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--color-primary);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            animation: slideDown 0.6s ease;
            box-shadow: 0 4px 20px rgba(0, 255, 159, 0.2);
        }

        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .header-content {
            max-width: 1024px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-family: 'Orbitron', monospace;
            color: var(--color-bg);
            font-size: 1.5rem;
            animation: logoFloat 3s ease-in-out infinite;
            box-shadow: var(--shadow-neon);
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); box-shadow: var(--shadow-neon); }
            50% { transform: translateY(-5px) rotate(5deg); box-shadow: 0 0 30px rgba(0, 255, 159, 0.5); }
        }

        .header-text h1 {
            font-size: 1.25rem;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            color: var(--color-primary);
            text-shadow: 0 0 10px rgba(0, 255, 159, 0.5);
        }

        .header-text p {
            font-size: 0.875rem;
            color: var(--color-text-dim);
        }

        .stage {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity var(--transition), transform var(--transition);
        }

        .stage.active {
            display: block;
            animation: fadeInUp 0.4s ease forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            background: rgba(21, 26, 61, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 14px;
            padding: 2.5rem;
            box-shadow: var(--shadow-soft);
            margin: 2rem auto;
            animation: cardPop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0, 255, 159, 0.2);
        }

        .card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(0, 255, 159, 0.05), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        @keyframes cardPop {
            from {
                transform: scale(0.9);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .card-split {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        @media (min-width: 768px) {
            .card-split {
                grid-template-columns: 1fr 1fr;
            }
        }

        h2 {
            font-size: 1.75rem;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            color: var(--color-primary);
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
            text-shadow: 0 0 10px rgba(0, 255, 159, 0.3);
        }

        .subtitle {
            color: var(--color-text-dim);
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
            position: relative;
            z-index: 1;
        }

        .form-group {
            margin-bottom: 1.25rem;
            position: relative;
            z-index: 1;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--color-text);
            font-size: 0.9rem;
        }

        input, select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid rgba(0, 255, 159, 0.3);
            border-radius: 10px;
            font-family: inherit;
            font-size: 1rem;
            transition: border-color var(--transition), box-shadow var(--transition), transform 0.2s;
            background: rgba(10, 14, 39, 0.6);
            color: var(--color-text);
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(0, 255, 159, 0.2);
            transform: translateY(-2px);
        }

        .helper-text {
            font-size: 0.8rem;
            color: var(--color-text-dim);
            margin-top: 0.25rem;
        }

        .btn {
            padding: 0.875rem 2rem;
            border: none;
            border-radius: 999px;
            font-family: 'Orbitron', monospace;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            color: var(--color-bg);
            box-shadow: var(--shadow-neon);
        }

        .btn-primary:hover:not(:disabled) {
            box-shadow: 0 0 30px rgba(0, 255, 159, 0.5);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--color-warning), var(--color-accent));
            color: var(--color-bg);
        }

        .btn-secondary:hover {
            box-shadow: 0 0 30px rgba(255, 190, 11, 0.5);
            transform: translateY(-2px);
        }

        .btn-ghost {
            background: transparent;
            border: 2px solid var(--color-primary);
            color: var(--color-primary);
        }

        .btn-ghost:hover {
            background: var(--color-primary);
            color: var(--color-bg);
            box-shadow: var(--shadow-neon);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1.5rem;
            position: relative;
            z-index: 1;
        }

        .center-content {
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .center-content .btn {
            margin-top: 1.5rem;
        }

        .scan-options {
            display: flex;
            gap: 1rem;
            margin: 1.5rem 0;
            position: relative;
            z-index: 1;
        }

        .scan-option {
            flex: 1;
            padding: 1rem;
            border: 2px solid rgba(0, 255, 159, 0.3);
            border-radius: 12px;
            cursor: pointer;
            transition: all var(--transition);
            text-align: center;
            background: rgba(10, 14, 39, 0.4);
        }

        .scan-option:hover {
            border-color: var(--color-primary);
            background: rgba(0, 255, 159, 0.1);
            transform: translateY(-3px) scale(1.02);
            box-shadow: var(--shadow-neon);
        }

        .scan-option.selected {
            border-color: var(--color-primary);
            background: rgba(0, 255, 159, 0.15);
            box-shadow: var(--shadow-neon);
        }

        .scan-option input[type="radio"] {
            margin-right: 0.5rem;
        }

        .video-container {
            position: relative;
            width: 100%;
            aspect-ratio: 4/3;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            margin: 1rem 0;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);
        }

        #webcamFeed {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .scan-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .scan-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 159, 0.3) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 159, 0.3) 1px, transparent 1px);
            background-size: 30px 30px;
            animation: scanGrid 3s linear infinite;
        }

        @keyframes scanGrid {
            0% { transform: translateY(0); }
            100% { transform: translateY(30px); }
        }

        .scan-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 200px;
            height: 200px;
            margin: -100px 0 0 -100px;
            border: 3px solid var(--color-amber);
            border-radius: 50%;
            animation: pulseScan 2s ease-in-out infinite;
            box-shadow: 0 0 30px rgba(212, 162, 85, 0.5);
        }

        @keyframes pulseScan {
            0%, 100% { 
                transform: scale(1); 
                opacity: 0.8;
                box-shadow: 0 0 30px rgba(212, 162, 85, 0.5);
            }
            50% { 
                transform: scale(1.1); 
                opacity: 1;
                box-shadow: 0 0 50px rgba(212, 162, 85, 0.8);
            }
        }

        .metrics-grid {
            position: absolute;
            top: 1rem;
            left: 1rem;
            right: 1rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 0.5rem;
            z-index: 10;
        }

        .metric-card {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            padding: 0.6rem;
            border-radius: 8px;
            color: var(--color-primary);
            border-left: 3px solid var(--color-primary);
            animation: metricPulse 2s ease-in-out infinite;
            transition: transform 0.3s;
            box-shadow: 0 0 10px rgba(0, 255, 159, 0.2);
        }

        .metric-card:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-neon);
        }

        @keyframes metricPulse {
            0%, 100% { border-left-color: var(--color-primary); }
            50% { border-left-color: var(--color-secondary); }
        }

        .metric-label {
            font-size: 0.65rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .metric-value {
            font-size: 1rem;
            font-weight: 700;
            margin-top: 0.25rem;
        }

        .scan-hud {
            position: absolute;
            bottom: 1rem;
            left: 1rem;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            padding: 1rem;
            border-radius: 10px;
            color: white;
            min-width: 200px;
        }

        .scan-status {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-amber), var(--color-sage));
            width: 0%;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px rgba(212, 162, 85, 0.5);
        }

        .progress-circle {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            width: 60px;
            height: 60px;
        }

        .progress-circle svg {
            transform: rotate(-90deg);
            filter: drop-shadow(0 0 8px rgba(212, 162, 85, 0.5));
        }

        .progress-circle circle {
            fill: none;
            stroke-width: 4;
        }

        .progress-track {
            stroke: rgba(255, 255, 255, 0.2);
        }

        .progress-indicator {
            stroke: var(--color-amber);
            stroke-dasharray: 188.4;
            stroke-dashoffset: 188.4;
            transition: stroke-dashoffset 0.3s ease;
        }

        .progress-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.75rem;
            font-weight: 600;
            color: white;
        }

        .upload-zone {
            border: 3px dashed rgba(62, 90, 62, 0.3);
            border-radius: 12px;
            padding: 3rem 2rem;
            text-align: center;
            cursor: pointer;
            transition: all var(--transition);
            position: relative;
            z-index: 1;
        }

        .upload-zone:hover {
            border-color: var(--color-sage);
            background: rgba(107, 138, 107, 0.05);
            transform: scale(1.02);
        }

        .upload-zone.dragover {
            border-color: var(--color-sage);
            background: rgba(107, 138, 107, 0.1);
            transform: scale(1.05);
        }

        #fileInput {
            display: none;
        }

        .preview-image {
            max-width: 100%;
            max-height: 400px;
            border-radius: 12px;
            margin: 1rem auto;
            display: block;
        }

        .processing-steps {
            margin: 2rem 0;
            position: relative;
            z-index: 1;
        }

        .processing-step {
            padding: 1rem;
            border-left: 3px solid rgba(0, 255, 159, 0.3);
            margin-bottom: 1rem;
            opacity: 0;
            transform: translateX(-20px);
            transition: all var(--transition);
            background: rgba(10, 14, 39, 0.4);
            border-radius: 8px;
        }

        .processing-step.active {
            opacity: 1;
            transform: translateX(0);
            border-left-color: var(--color-primary);
            animation: stepGlow 1.5s ease-in-out infinite;
        }

        @keyframes stepGlow {
            0%, 100% { box-shadow: -3px 0 0 rgba(0, 255, 159, 0.3); }
            50% { box-shadow: -3px 0 15px rgba(0, 255, 159, 0.5); }
        }

        .processing-step.completed {
            opacity: 0.6;
            border-left-color: var(--color-primary);
        }

        .confidence-meter {
            margin: 2rem 0;
            padding: 1.5rem;
            background: rgba(0, 255, 159, 0.05);
            border-radius: 12px;
            position: relative;
            z-index: 1;
            border: 1px solid rgba(0, 255, 159, 0.2);
        }

        .confidence-bar {
            width: 100%;
            height: 12px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 6px;
            overflow: hidden;
            border: 1px solid rgba(0, 255, 159, 0.3);
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(0, 255, 159, 0.5);
        }

        .confidence-value {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            color: var(--color-primary);
            margin-top: 0.5rem;
            text-shadow: 0 0 10px rgba(0, 255, 159, 0.5);
        }

        .raw-logs pre {
            background: var(--color-bg);
            color: var(--color-primary);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 0.8rem;
            margin-top: 0.5rem;
            border: 1px solid rgba(0, 255, 159, 0.3);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 14, 39, 0.9);
            backdrop-filter: blur(8px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: rgba(21, 26, 61, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 18px;
            padding: 2rem;
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
            animation: modalSlideUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            border: 2px solid rgba(0, 255, 159, 0.3);
        }

        @keyframes modalSlideUp {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 36px;
            height: 36px;
            border: none;
            background: rgba(62, 90, 62, 0.1);
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-text);
        }

        .modal-close:hover {
            background: rgba(62, 90, 62, 0.2);
            transform: rotate(90deg);
        }

        .result-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .result-photo {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 1.5rem;
            display: block;
            border: 4px solid var(--color-primary);
            box-shadow: var(--shadow-neon);
            transition: transform 0.3s;
        }

        .result-photo:hover {
            transform: scale(1.05) rotate(2deg);
            box-shadow: 0 0 30px rgba(0, 255, 159, 0.5);
        }

        .result-info {
            text-align: center;
            margin-bottom: 2rem;
        }

        .result-name {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            color: var(--color-primary);
            margin-bottom: 0.25rem;
        }

        .result-role {
            color: var(--color-sage);
            margin-bottom: 0.5rem;
        }

        .result-meta {
            font-size: 0.9rem;
            color: var(--color-sage);
        }

        .verdict-card {
            background: linear-gradient(135deg, rgba(0, 255, 159, 0.1), rgba(0, 212, 255, 0.1));
            border-radius: 14px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
            perspective: 1000px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0, 255, 159, 0.3);
        }

        .verdict-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 255, 159, 0.1), transparent);
            animation: rotate 10s linear infinite;
            opacity: 0;
            transition: opacity 0.5s;
        }

        .verdict-card.legit::before {
            background: radial-gradient(circle, rgba(0, 255, 159, 0.2), transparent);
            opacity: 1;
        }

        .verdict-card.fraud::before {
            background: radial-gradient(circle, rgba(255, 0, 110, 0.2), transparent);
            opacity: 1;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .verdict-label {
            font-size: 2rem;
            font-weight: 900;
            font-family: 'Orbitron', monospace;
            margin-bottom: 1rem;
            animation: flipIn 0.6s ease;
            transform-style: preserve-3d;
            position: relative;
            z-index: 1;
        }

        @keyframes flipIn {
            0% {
                transform: rotateY(90deg);
                opacity: 0;
            }
            100% {
                transform: rotateY(0);
                opacity: 1;
            }
        }

        .verdict-label.legit {
            color: var(--color-success);
            animation: flipIn 0.6s ease, successPulse 2s ease-in-out infinite 0.6s;
            text-shadow: 0 0 20px rgba(0, 255, 159, 0.5);
        }

        .verdict-label.fraud {
            color: var(--color-danger);
            animation: flipIn 0.6s ease, shakeFraud 0.5s ease 0.6s, glowRed 2s ease-in-out infinite 1.1s;
            text-shadow: 0 0 20px rgba(255, 0, 110, 0.5);
        }

        @keyframes successPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shakeFraud {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
            20%, 40%, 60%, 80% { transform: translateX(8px); }
        }

        @keyframes glowRed {
            0%, 100% { 
                text-shadow: 0 0 20px rgba(255, 0, 110, 0.5);
            }
            50% { 
                text-shadow: 0 0 30px rgba(255, 0, 110, 0.8),
                             0 0 40px rgba(255, 0, 110, 0.6);
            }
        }

        .justification {
            background: rgba(10, 14, 39, 0.6);
            padding: 1.5rem;
            border-radius: 10px;
            border-left: 4px solid var(--color-secondary);
            text-align: left;
            line-height: 1.8;
            color: var(--color-text);
            font-size: 0.95rem;
            position: relative;
            z-index: 1;
            font-family: 'Courier New', monospace;
        }

        .report-section {
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: rgba(0, 255, 159, 0.05);
            border-radius: 10px;
            animation: fadeInUp 0.5s ease;
            border: 1px solid rgba(0, 255, 159, 0.2);
        }

        .report-section h3 {
            font-size: 1.1rem;
            font-family: 'Orbitron', monospace;
            color: var(--color-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .detail-item {
            padding: 0.75rem;
            background: rgba(10, 14, 39, 0.6);
            border-radius: 8px;
            border-left: 3px solid var(--color-primary);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .detail-item:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-neon);
        }

        .detail-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--color-text-dim);
            margin-bottom: 0.25rem;
            letter-spacing: 0.05em;
        }

        .detail-value {
            font-size: 1rem;
            font-weight: 600;
            font-family: 'Orbitron', monospace;
            color: var(--color-primary);
        }

        @media (max-width: 768px) {
            .card {
                padding: 1.5rem;
            }

            .scan-options {
                flex-direction: column;
            }

            .btn-group {
                flex-direction: column;
            }

            .result-actions {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        .emoji-shower {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            overflow: hidden;
        }

        .emoji-particle {
            position: absolute;
            font-size: 2rem;
            animation: fall linear forwards;
            opacity: 0;
        }

        @keyframes fall {
            0% {
                opacity: 0;
                transform: translateY(-100%) rotate(0deg);
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <canvas id="particles"></canvas>
    
    <header>
        <div class="header-content">
            <div class="logo" aria-hidden="true">4</div>
            <div class="header-text">
                <h1>SentinelIQ </h1>
                <p>The watchdog with trust issues. </p>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Stage 1: Landing -->
        <div id="stage1" class="stage active">
            <div class="card center-content">
                <h2>SentinelIQ ‚Äî Trust Nobody</h2>
                <p class="subtitle">Welcome to SentinelIQ, where every claim is guilty until proven otherwise. Our verification engine doesn‚Äôt believe in ‚Äògood faith‚Äô - just good data.</p>
                <button class="btn btn-primary" onclick="startVerification()" aria-label="Begin verification process">
                    Begin Verification
                </button>
            </div>
        </div>

        <!-- Stage 2: Form -->
        <div id="stage2" class="stage">
            <div class="card">
                <h2>Candidate Profile</h2>
                <p class="subtitle">Please provide accurate information for optimal verification results.</p>
                <form id="profileForm" onsubmit="submitForm(event)">
                    <div class="form-group">
                        <label for="fullName">Full Name <span aria-label="required">*</span></label>
                        <input type="text" id="fullName" name="fullName" required minlength="2" 
                               aria-required="true" aria-describedby="nameHelper">
                        <span id="nameHelper" class="helper-text">Enter your full legal name</span>
                    </div>

                    <div class="card-split">
                        <div class="form-group">
                            <label for="age">Age <span aria-label="required">*</span></label>
                            <input type="number" id="age" name="age" min="16" max="120" required 
                                   aria-required="true" aria-describedby="ageHelper">
                            <span id="ageHelper" class="helper-text">Must be between 16-120</span>
                        </div>

                        <div class="form-group">
                            <label for="gender">Gender <span aria-label="required">*</span></label>
                            <select id="gender" name="gender" required aria-required="true">
                                <option value="">Select...</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Non-binary">Non-binary</option>
                                <option value="Prefer not to say">Prefer not to say</option>
                            </select>
                        </div>
                    </div>

                    <div class="card-split">
                        <div class="form-group">
                            <label for="role">Current Role <span aria-label="required">*</span></label>
                            <input type="text" id="role" name="role" required 
                                   aria-required="true" aria-describedby="roleHelper"
                                   list="roleSuggestions">
                            <datalist id="roleSuggestions">
                                <option value="Senior Analyst">
                                <option value="Consultant">
                                <option value="Manager">
                                <option value="Director">
                                <option value="Specialist">
                            </datalist>
                            <span id="roleHelper" class="helper-text">Your current job title</span>
                        </div>

                        <div class="form-group">
                            <label for="experience">Years of Experience <span aria-label="required">*</span></label>
                            <input type="number" id="experience" name="experience" min="0" max="60" required 
                                   aria-required="true" aria-describedby="expHelper">
                            <span id="expHelper" class="helper-text">0-60 years</span>
                        </div>
                    </div>

                    <div class="btn-group">
                        <button type="button" class="btn btn-ghost" onclick="goToStage(1)">Back</button>
                        <button type="submit" class="btn btn-primary" id="formSubmit" disabled>
                            Proceed to Scan
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Stage 3: Facial Scan -->
        <div id="stage3" class="stage">
            <div class="card">
                <h2>Facial Scan ‚Äî Liveness & Feature Mapping</h2>
                <p class="subtitle">Select your preferred capture method. Live video offers enhanced simulated liveness metrics.</p>

                <div class="scan-options" role="radiogroup" aria-label="Scan method selection">
                    <div class="scan-option selected" onclick="selectScanMode('webcam')" tabindex="0" role="radio" aria-checked="true" aria-label="Use webcam">
                        <input type="radio" name="scanMode" value="webcam" checked>
                        <strong>Use Webcam</strong><br>
                        <small>Recommended for optimal results</small>
                    </div>
                    <div class="scan-option" onclick="selectScanMode('upload')" tabindex="0" role="radio" aria-checked="false" aria-label="Upload photo">
                        <input type="radio" name="scanMode" value="upload">
                        <strong>Upload Photo</strong><br>
                        <small>JPEG or PNG, max 5MB</small>
                    </div>
                </div>

                <div id="webcamSection">
                    <div class="video-container">
                        <video id="webcamFeed" autoplay playsinline muted aria-label="Webcam feed"></video>
                        <div class="scan-overlay" id="scanOverlay" style="display: none;">
                            <div class="scan-grid"></div>
                            <div class="scan-ring"></div>
                            <div class="metrics-grid" id="metricsGrid"></div>
                            <div class="progress-circle">
                                <svg width="60" height="60">
                                    <circle class="progress-track" cx="30" cy="30" r="26"></circle>
                                    <circle class="progress-indicator" id="circleProgress" cx="30" cy="30" r="26"></circle>
                                </svg>
                                <div class="progress-label" id="percentLabel">0%</div>
                            </div>
                        </div>
                    </div>
                    <div class="btn-group">
                        <button type="button" class="btn btn-ghost" onclick="goToStage(2)">Back</button>
                        <button type="button" class="btn btn-primary" id="startWebcamBtn" onclick="startWebcam()">
                            Initialize Camera
                        </button>
                        <button type="button" class="btn btn-primary" id="startScanBtn" onclick="startScan()" style="display: none;">
                            Start Scan
                        </button>
                    </div>
                </div>

                <div id="uploadSection" style="display: none;">
                    <div class="upload-zone" onclick="document.getElementById('fileInput').click()" 
                         ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)"
                         tabindex="0" role="button" aria-label="Upload photo zone">
                        <div id="uploadPrompt">
                            <p style="font-size: 2rem; margin-bottom: 0.5rem;">üì∏</p>
                            <p><strong>Click to upload</strong> or drag and drop</p>
                            <p class="helper-text">JPEG or PNG (max 5MB)</p>
                        </div>
                        <img id="uploadPreview" class="preview-image" style="display: none;" alt="Uploaded photo preview">
                    </div>
                    <input type="file" id="fileInput" accept="image/jpeg,image/png" onchange="handleFileSelect(event)">
                    <div class="btn-group">
                        <button type="button" class="btn btn-ghost" onclick="goToStage(2)">Back</button>
                        <button type="button" class="btn btn-primary" id="uploadScanBtn" onclick="startScan()" style="display: none;">
                            Start Scan
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stage 4: Processing -->
        <div id="stage4" class="stage">
            <div class="card">
                <h2>Processing & Heuristic Correlation</h2>
                <p class="subtitle">Running multi-channel integrity verification. Please wait...</p>

                <div class="processing-steps" id="processingSteps"></div>

                <div class="confidence-meter">
                    <div class="confidence-label">Confidence Score Projection</div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" id="confidenceFill"></div>
                    </div>
                    <div class="confidence-value" id="confidenceValue">0%</div>
                </div>

                <details class="raw-logs">
                    <summary>Show raw logs</summary>
                    <pre id="rawLogsContent"></pre>
                </details>
            </div>
        </div>
    </div>

    <!-- Result Modal -->
    <div id="resultModal" class="modal" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()" aria-label="Close modal">&times;</button>
            
            <div class="result-header">
                <h2 id="modalTitle">Verification Summary</h2>
                <img id="resultPhoto" class="result-photo" alt="Candidate photo">
            </div>

            <div class="result-info">
                <div class="result-name" id="resultName"></div>
                <div class="result-role" id="resultRole"></div>
                <div class="result-meta" id="resultMeta"></div>
            </div>

            <div class="verdict-card" id="verdictCard">
                <div class="verdict-label" id="verdictLabel"></div>
                <div class="confidence-score" id="finalConfidence"></div>
                <div class="justification" id="justificationText"></div>
            </div>

            <div class="report-section">
                <h3>üìä Scan Analytics</h3>
                <div class="detail-grid" id="scanDetails"></div>
            </div>

            <div class="report-section">
                <h3>üîç Profile Metrics</h3>
                <div class="detail-grid" id="profileDetails"></div>
            </div>

            <div class="result-actions">
                <button class="btn btn-secondary" onclick="exportPNG()">Export PNG</button>
                <button class="btn btn-secondary" onclick="exportPDF()">Export PDF</button>
                <button class="btn btn-primary" onclick="runAgain()">Run Again</button>
            </div>
        </div>
    </div>

    <div id="emojiShower" class="emoji-shower"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script>
        // Particle animation - cyberpunk style
        const canvas = document.getElementById('particles');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const particles = [];
        const particleCount = 80;

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 2 + 0.5;
                this.speedX = Math.random() * 0.5 - 0.25;
                this.speedY = Math.random() * 0.5 - 0.25;
                this.color = Math.random() > 0.5 ? 'rgba(0, 255, 159, 0.4)' : 'rgba(0, 212, 255, 0.4)';
            }

            update() {
                this.x += this.speedX;
                this.y += this.speedY;

                if (this.x > canvas.width) this.x = 0;
                if (this.x < 0) this.x = canvas.width;
                if (this.y > canvas.height) this.y = 0;
                if (this.y < 0) this.y = canvas.height;
            }

            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                
                // Glow effect
                ctx.shadowBlur = 10;
                ctx.shadowColor = this.color;
            }
        }

        function initParticles() {
            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle());
            }
        }

        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(particle => {
                particle.update();
                particle.draw();
            });
            requestAnimationFrame(animateParticles);
        }

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        initParticles();
        animateParticles();

        // Configuration
        const CONFIG = {
            seed: new URLSearchParams(window.location.search).get('seed') || Math.floor(Math.random() * 10000),
            scanDurationRange: [8000, 12000],
            funnyJustifications: {
                legit: [
                    "iris_dilation(0.03s) < threshold ‚Üí ‚à¥ coffee_drinker = true",
                    "smile_asymmetry(2.3¬∞) ‚àà database.harmless_patterns",
                    "blink_rate(18/min) √ó jitter(0.4) ‚â§ variance_acceptable",
                    "eyebrow_arch(31¬∞) ‚Üí mild_confusion ‚äÇ std_human_behavior",
                    "micro_expr(0.2s): confusion_detected ‚Üí relatable = true",
                    "posture: slouch(14¬∞) ‚Üí wfh_confirmed"
            ],
                fraud: [
                    "tie_straightness(89%) > db_avg(62%) ‚Üí sus_lvl: HIGH",
                    "smile_symmetry(0.97) ‚Üí ai_face_prob = 0.23",
                    "eye_contact(97%) ‚àâ normal_range ‚Üí actor_detected",
                    "posture = perfect ‚Üí red_flag: military OR imposter",
                    "grooming(0.91) > pop_mean ‚Üí possible_disguise",
                    "confidence^high √ó age^low = imposter_syndrome^-1 ‚Üí SUS"
                ]
            }
        };

        // State
        let currentStage = 1;
        let formData = {};
        let capturedImage = null;
        let stream = null;
        let scanMode = 'webcam';
        let scanMetrics = {};

        // Seeded random number generator
        class SeededRandom {
            constructor(seed) {
                this.seed = seed;
            }
            
            random() {
                const x = Math.sin(this.seed++) * 10000;
                return x - Math.floor(x);
            }
        }

        const rng = new SeededRandom(CONFIG.seed);

        // Navigation
        function goToStage(stage) {
            document.querySelectorAll('.stage').forEach(s => {
                s.classList.remove('active');
            });
            
            currentStage = stage;
            document.getElementById(`stage${stage}`).classList.add('active');
            
            // Focus management
            setTimeout(() => {
                const heading = document.querySelector(`#stage${stage} h2`);
                if (heading) heading.focus();
            }, 100);
        }

        function startVerification() {
            goToStage(2);
        }

        // Form validation
        const form = document.getElementById('profileForm');
        const submitBtn = document.getElementById('formSubmit');

        form.addEventListener('input', () => {
            const isValid = form.checkValidity();
            submitBtn.disabled = !isValid;
        });

        function submitForm(e) {
            e.preventDefault();
            
            formData = {
                fullName: document.getElementById('fullName').value,
                age: document.getElementById('age').value,
                gender: document.getElementById('gender').value,
                role: document.getElementById('role').value,
                experience: document.getElementById('experience').value
            };
            
            goToStage(3);
        }

        // Scan mode selection
        function selectScanMode(mode) {
            scanMode = mode;
            
            document.querySelectorAll('.scan-option').forEach(opt => {
                opt.classList.remove('selected');
                opt.setAttribute('aria-checked', 'false');
            });
            
            const selected = event.currentTarget;
            selected.classList.add('selected');
            selected.setAttribute('aria-checked', 'true');
            
            if (mode === 'webcam') {
                document.getElementById('webcamSection').style.display = 'block';
                document.getElementById('uploadSection').style.display = 'none';
            } else {
                document.getElementById('webcamSection').style.display = 'none';
                document.getElementById('uploadSection').style.display = 'block';
            }
        }

        // Webcam handling
        async function startWebcam() {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'user' } 
                });
                
                const video = document.getElementById('webcamFeed');
                video.srcObject = stream;
                
                document.getElementById('startWebcamBtn').style.display = 'none';
                document.getElementById('startScanBtn').style.display = 'inline-block';
            } catch (error) {
                alert('Camera access denied. Please use the upload option instead.');
                selectScanMode('upload');
            }
        }

        // File upload handling
        function handleFileSelect(e) {
            const file = e.target.files[0];
            processUploadedFile(file);
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('dragover');
            
            const file = e.dataTransfer.files[0];
            processUploadedFile(file);
        }

        function processUploadedFile(file) {
            if (!file || !file.type.match('image.*')) {
                alert('Please upload a valid image file (JPEG or PNG)');
                return;
            }
            
            if (file.size > 5 * 1024 * 1024) {
                alert('File size must be less than 5MB');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById('uploadPreview');
                preview.src = e.target.result;
                preview.style.display = 'block';
                document.getElementById('uploadPrompt').style.display = 'none';
                document.getElementById('uploadScanBtn').style.display = 'inline-block';
                
                capturedImage = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        // Scanning animation
        async function startScan() {
            if (scanMode === 'webcam') {
                const video = document.getElementById('webcamFeed');
                const canvas = document.createElement('canvas');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(video, 0, 0);
                capturedImage = canvas.toDataURL('image/png');
            }
            
            document.getElementById('scanOverlay').style.display = 'block';
            
            // Initialize metrics
            const metricsGrid = document.getElementById('metricsGrid');
            const metrics = [
                { label: 'Heart Rate', value: '0 BPM', id: 'heartRate' },
                { label: 'Temp Scan', value: '0¬∞C', id: 'temp' },
                { label: 'Blink Rate', value: '0/min', id: 'blink' },
                { label: 'Micro Expr', value: '0', id: 'micro' },
                { label: 'Iris √ò', value: '0mm', id: 'iris' },
                { label: 'Skin ŒºS', value: '0', id: 'skin' }
            ];
            
            metricsGrid.innerHTML = metrics.map(m => `
                <div class="metric-card">
                    <div class="metric-label">${m.label}</div>
                    <div class="metric-value" id="${m.id}">${m.value}</div>
                </div>
            `).join('');
            
            const duration = CONFIG.scanDurationRange[0] + 
                           rng.random() * (CONFIG.scanDurationRange[1] - CONFIG.scanDurationRange[0]);
            
            const startTime = Date.now();
            
            scanMetrics = {
                heartRate: Math.floor(60 + rng.random() * 40),
                temperature: (36.1 + rng.random() * 1.2).toFixed(1),
                blinkRate: Math.floor(12 + rng.random() * 15),
                microExpressions: Math.floor(5 + rng.random() * 20),
                irisDilation: (2.5 + rng.random() * 2).toFixed(1),
                skinConductance: (2 + rng.random() * 8).toFixed(1)
            };
            
            const animateScan = () => {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                document.getElementById('percentLabel').textContent = `${Math.floor(progress * 100)}%`;
                
                const circumference = 2 * Math.PI * 26;
                const offset = circumference - (progress * circumference);
                document.getElementById('circleProgress').style.strokeDashoffset = offset;
                
                // Animate metrics
                document.getElementById('heartRate').textContent = Math.floor(progress * scanMetrics.heartRate) + ' BPM';
                document.getElementById('temp').textContent = (progress * scanMetrics.temperature).toFixed(1) + '¬∞C';
                document.getElementById('blink').textContent = Math.floor(progress * scanMetrics.blinkRate) + '/min';
                document.getElementById('micro').textContent = Math.floor(progress * scanMetrics.microExpressions);
                document.getElementById('iris').textContent = (progress * scanMetrics.irisDilation).toFixed(1) + 'mm';
                document.getElementById('skin').textContent = (progress * scanMetrics.skinConductance).toFixed(1);
                
                if (progress < 1) {
                    requestAnimationFrame(animateScan);
                } else {
                    if (stream) {
                        stream.getTracks().forEach(track => track.stop());
                    }
                    
                    setTimeout(() => {
                        goToStage(4);
                        runProcessing();
                    }, 500);
                }
            };
            
            requestAnimationFrame(animateScan);
        }

        // Processing simulation
        function runProcessing() {
            const steps = [
                {
                    title: 'Searching internal DB...',
                    log: `[${new Date().toISOString()}] Querying registry: ${Math.floor(rng.random() * 10000)} records scanned`,
                    duration: 1500
                },
                {
                    title: 'Cross-referencing social media heuristics...',
                    log: `[${new Date().toISOString()}] Analyzing digital footprint: ${Math.floor(rng.random() * 50)} platforms checked`,
                    duration: 2000
                },
                {
                    title: 'Checking device & session metadata...',
                    log: `[${new Date().toISOString()}] Device fingerprint: ${Array.from({length: 16}, () => 
                        Math.floor(rng.random() * 16).toString(16)).join('')}`,
                    duration: 1800
                },
                {
                    title: 'Analyzing voiceprint signature...',
                    log: `[${new Date().toISOString()}] Voice pattern correlation: ${(rng.random() * 100).toFixed(2)}% match confidence`,
                    duration: 2200
                }
            ];
            
            const container = document.getElementById('processingSteps');
            container.innerHTML = '';
            
            let rawLogs = '';
            let confidence = 0;
            
            steps.forEach((step, index) => {
                setTimeout(() => {
                    // Add step element
                    const stepEl = document.createElement('div');
                    stepEl.className = 'processing-step active';
                    stepEl.innerHTML = `
                        <div class="step-header">
                            <span class="step-title">${step.title}</span>
                            <span class="step-status">Processing</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 100%;"></div>
                        </div>
                        <div class="step-log">${step.log}</div>
                    `;
                    container.appendChild(stepEl);
                    
                    // Update confidence
                    confidence = Math.min(((index + 1) / steps.length) * 100, 100);
                    document.getElementById('confidenceFill').style.width = `${confidence}%`;
                    document.getElementById('confidenceValue').textContent = `${Math.floor(confidence)}%`;
                    
                    // Add to raw logs
                    rawLogs += `${step.log}\n`;
                    rawLogs += `{\n  "step": "${step.title}",\n  "status": "completed",\n  "timestamp": "${new Date().toISOString()}"\n}\n\n`;
                    document.getElementById('rawLogsContent').textContent = rawLogs;
                    
                    // Mark as completed after animation
                    setTimeout(() => {
                        stepEl.classList.remove('active');
                        stepEl.classList.add('completed');
                        stepEl.querySelector('.step-status').textContent = 'Completed';
                    }, step.duration - 200);
                    
                    // Show results after last step
                    if (index === steps.length - 1) {
                        setTimeout(() => {
                            showResults();
                        }, step.duration);
                    }
                }, steps.slice(0, index).reduce((sum, s) => sum + s.duration, 0));
            });
        }

        // Emoji shower effect
        function createEmojiShower(isLegit) {
            const container = document.getElementById('emojiShower');
            container.innerHTML = '';
            
            const emojis = isLegit ? ['üå∏', 'üå∫', 'üåº', 'üåª', 'üå∑', 'üèµÔ∏è', 'üíê', 'üåπ'] : ['üòà', 'üëø', 'üíÄ', 'üî•', '‚ö†Ô∏è', '‚ùå'];
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                setTimeout(() => {
                    const emoji = document.createElement('div');
                    emoji.className = 'emoji-particle';
                    emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                    emoji.style.left = Math.random() * 100 + '%';
                    emoji.style.animationDuration = (3 + Math.random() * 2) + 's';
                    emoji.style.animationDelay = '0s';
                    
                    container.appendChild(emoji);
                    
                    setTimeout(() => {
                        emoji.remove();
                    }, 5000);
                }, i * 100);
            }
            
            setTimeout(() => {
                container.innerHTML = '';
            }, 6000);
        }

        // Results with conditional logic and DYNAMIC metrics
        function showResults() {
            const role = formData.role.toLowerCase();
            const age = parseInt(formData.age);
            const experience = parseInt(formData.experience);
            
            // CRITERIA: age < 25 OR role contains "presales" OR experience < 5 = LEGIT, else FRAUD
            const isLegit = age < 25 || role.includes('presales') || experience < 5;
            
            const confidence = Math.floor(70 + rng.random() * 25);
            const justifications = isLegit ? CONFIG.funnyJustifications.legit : CONFIG.funnyJustifications.fraud;
            const justification = justifications[Math.floor(rng.random() * justifications.length)];
            
            // Generate DYNAMIC and REALISTIC scan metrics based on verdict
            let dynamicMetrics;
            if (isLegit) {
                // Normal/relaxed metrics for legit candidates
                dynamicMetrics = {
                    heartRate: Math.floor(65 + rng.random() * 20), // 65-85 BPM (relaxed)
                    temperature: (36.4 + rng.random() * 0.5).toFixed(1), // 36.4-36.9¬∞C (normal)
                    blinkRate: Math.floor(15 + rng.random() * 10), // 15-25/min (normal)
                    microExpressions: Math.floor(8 + rng.random() * 8), // 8-16 (moderate)
                    irisDilation: (3.0 + rng.random() * 1.5).toFixed(1), // 3.0-4.5mm (normal)
                    skinConductance: (2.5 + rng.random() * 3).toFixed(1) // 2.5-5.5 ¬µS (calm)
                };
            } else {
                // Stressed/nervous metrics for fraud candidates
                dynamicMetrics = {
                    heartRate: Math.floor(85 + rng.random() * 25), // 85-110 BPM (elevated)
                    temperature: (36.8 + rng.random() * 0.6).toFixed(1), // 36.8-37.4¬∞C (slightly elevated)
                    blinkRate: Math.floor(25 + rng.random() * 15), // 25-40/min (nervous)
                    microExpressions: Math.floor(18 + rng.random() * 12), // 18-30 (high)
                    irisDilation: (4.5 + rng.random() * 1.8).toFixed(1), // 4.5-6.3mm (dilated/stress)
                    skinConductance: (6.0 + rng.random() * 4).toFixed(1) // 6.0-10.0 ¬µS (stressed)
                };
            }
            
            // Populate modal
            document.getElementById('resultPhoto').src = capturedImage;
            document.getElementById('resultName').textContent = formData.fullName;
            document.getElementById('resultRole').textContent = formData.role;
            document.getElementById('resultMeta').textContent = 
                `${formData.age} years old ‚Ä¢ ${formData.gender} ‚Ä¢ ${formData.experience} years experience`;
            
            const verdictCard = document.getElementById('verdictCard');
            verdictCard.className = `verdict-card ${isLegit ? 'legit' : 'fraud'}`;
            
            const verdictLabel = document.getElementById('verdictLabel');
            verdictLabel.textContent = isLegit ? 'VERDICT: LEGIT ‚úì' : 'VERDICT: FRAUD ‚úó';
            verdictLabel.className = `verdict-label ${isLegit ? 'legit' : 'fraud'}`;
            
            document.getElementById('finalConfidence').textContent = `Confidence: ${confidence}%`;
            document.getElementById('justificationText').textContent = justification;
            
            // Scan details with DYNAMIC metrics
            const scanDetailsHTML = `
                <div class="detail-item">
                    <div class="detail-label">Heart Rate</div>
                    <div class="detail-value">${dynamicMetrics.heartRate} BPM</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Temperature</div>
                    <div class="detail-value">${dynamicMetrics.temperature}¬∞C</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Blink Rate</div>
                    <div class="detail-value">${dynamicMetrics.blinkRate}/min</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Micro Expressions</div>
                    <div class="detail-value">${dynamicMetrics.microExpressions}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Iris Dilation</div>
                    <div class="detail-value">${dynamicMetrics.irisDilation}mm</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Skin Conductance</div>
                    <div class="detail-value">${dynamicMetrics.skinConductance} ¬µS</div>
                </div>
            `;
            document.getElementById('scanDetails').innerHTML = scanDetailsHTML;
            
            // Profile details
            const timestamp = new Date().toLocaleString();
            const profileDetailsHTML = `
                <div class="detail-item">
                    <div class="detail-label">Full Name</div>
                    <div class="detail-value">${formData.fullName}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Age</div>
                    <div class="detail-value">${formData.age} years</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Gender</div>
                    <div class="detail-value">${formData.gender}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Role</div>
                    <div class="detail-value">${formData.role}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Experience</div>
                    <div class="detail-value">${formData.experience} years</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Scan Time</div>
                    <div class="detail-value">${timestamp}</div>
                </div>
            `;
            document.getElementById('profileDetails').innerHTML = profileDetailsHTML;
            
            const modal = document.getElementById('resultModal');
            modal.classList.add('active');
            
            // Trigger emoji shower effect
            setTimeout(() => {
                createEmojiShower(isLegit);
            }, 600);
            
            setTimeout(() => {
                modal.querySelector('.modal-close').focus();
            }, 100);
        }

        function closeModal() {
            document.getElementById('resultModal').classList.remove('active');
        }

        function runAgain() {
            closeModal();
            
            // Reset form
            document.getElementById('profileForm').reset();
            submitBtn.disabled = true;
            
            // Reset scan
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                stream = null;
            }
            document.getElementById('scanOverlay').style.display = 'none';
            document.getElementById('startWebcamBtn').style.display = 'inline-block';
            document.getElementById('startScanBtn').style.display = 'none';
            
            // Reset upload
            document.getElementById('uploadPreview').style.display = 'none';
            document.getElementById('uploadPrompt').style.display = 'block';
            document.getElementById('uploadScanBtn').style.display = 'none';
            document.getElementById('fileInput').value = '';
            
            // Go to start
            goToStage(1);
        }

        // Export functions
        async function exportPNG() {
            const modalContent = document.querySelector('.modal-content');
            
            try {
                const canvas = await html2canvas(modalContent, {
                    backgroundColor: '#ffffff',
                    scale: 2
                });
                
                const link = document.createElement('a');
                link.download = `veriscan-report-${Date.now()}.png`;
                link.href = canvas.toDataURL();
                link.click();
            } catch (error) {
                alert('Export failed. Please try again.');
            }
        }

        async function exportPDF() {
            const modalContent = document.querySelector('.modal-content');
            
            try {
                const canvas = await html2canvas(modalContent, {
                    backgroundColor: '#ffffff',
                    scale: 2
                });
                
                const imgData = canvas.toDataURL('image/png');
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4'
                });
                
                const imgWidth = 190;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                
                pdf.addImage(imgData, 'PNG', 10, 10, imgWidth, imgHeight);
                pdf.save(`veriscan-report-${Date.now()}.pdf`);
            } catch (error) {
                alert('Export failed. Please try again.');
            }
        }

        // Keyboard navigation for scan options
        document.querySelectorAll('.scan-option').forEach(option => {
            option.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    option.click();
                }
            });
        });

        // Close modal on Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && document.getElementById('resultModal').classList.contains('active')) {
                closeModal();
            }
        });

        // Trap focus in modal
        const modal = document.getElementById('resultModal');
        modal.addEventListener('keydown', (e) => {
            if (e.key === 'Tab' && modal.classList.contains('active')) {
                const focusableElements = modal.querySelectorAll(
                    'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
                );
                const firstElement = focusableElements[0];
                const lastElement = focusableElements[focusableElements.length - 1];
                
                if (e.shiftKey && document.activeElement === firstElement) {
                    e.preventDefault();
                    lastElement.focus();
                } else if (!e.shiftKey && document.activeElement === lastElement) {
                    e.preventDefault();
                    firstElement.focus();
                }
            }
        });

        console.log('Project 404 initialized with seed:', CONFIG.seed);
    </script>
</body>
</html>